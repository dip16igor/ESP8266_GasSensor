# ESP8266 –î–∞—Ç—á–∏–∫ –ì–∞–∑–∞ —Å –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –≤ Telegram

–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞ –±–∞–∑–µ ESP8266, –∫–æ—Ç–æ—Ä–æ–µ –∏–∑–º–µ—Ä—è–µ—Ç –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é –≥–∞–∑–∞, –≤–∏–∑—É–∞–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å –Ω–∞ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–Ω–æ–π –ª–µ–Ω—Ç–µ NeoPixel –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –æ–ø–∞—Å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞.

![photo_2024-05-22_15-49-10](https://github.com/user-attachments/assets/58814a38-5509-411a-855c-2041240c5e7b)

## ‚öôÔ∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è:** –£—Ä–æ–≤–µ–Ω—å –≥–∞–∑–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ 8-—Å–µ–≥–º–µ–Ω—Ç–Ω–æ–π —Å–≤–µ—Ç–æ–¥–∏–æ–¥–Ω–æ–π —à–∫–∞–ª–µ NeoPixel. –¶–≤–µ—Ç –º–µ–Ω—è–µ—Ç—Å—è –æ—Ç –∑–µ–ª–µ–Ω–æ–≥–æ (–±–µ–∑–æ–ø–∞—Å–Ω–æ) –∫ –∂–µ–ª—Ç–æ–º—É –∏ –∫—Ä–∞—Å–Ω–æ–º—É (–æ–ø–∞—Å–Ω–æ).
- **–°–∏—Å—Ç–µ–º–∞ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è:** –ü—Ä–∏ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ –≥–∞–∑–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –∑–≤—É–∫–æ–≤–∞—è (–∑—É–º–º–µ—Ä) –∏ —Å–≤–µ—Ç–æ–≤–∞—è (–º–∏–≥–∞–Ω–∏–µ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞) —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è.
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram:**
  - –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç—Ä–µ–≤–æ–∂–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π —á–∞—Ç.
  - –£–¥–∞–ª–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥.
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ OTA-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—à–∏–≤–∫–∏ "–ø–æ –≤–æ–∑–¥—É—Ö—É") –ø—Ä—è–º–æ –∏–∑ —á–∞—Ç–∞ Telegram.
- **–¢–∞–π–º–µ—Ä:** –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π 5-–º–∏–Ω—É—Ç–Ω—ã–π —Ç–∞–π–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–Ω–æ–ø–∫–æ–π. –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏—è –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä.
- **–ö–Ω–æ–ø–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
  - –ó–∞–ø—É—Å–∫–∞–µ—Ç/–¥–æ–±–∞–≤–ª—è–µ—Ç –≤—Ä–µ–º—è –∫ —Ç–∞–π–º–µ—Ä—É.
  - –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∞–µ—Ç –∑–≤—É–∫–æ–≤—É—é —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—é –≤–æ –≤—Ä–µ–º—è —Ç—Ä–µ–≤–æ–≥–∏.
  - –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Ç–∞–π–º–µ—Ä –ø—Ä–∏ –¥–æ–ª–≥–æ–º –Ω–∞–∂–∞—Ç–∏–∏.
- **–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä:** –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ–± —É—Ä–æ–≤–Ω–µ –≥–∞–∑–∞ –∏ –∫–∞—á–µ—Å—Ç–≤–µ WiFi-—Å–∏–≥–Ω–∞–ª–∞ –Ω–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞.

## üîå –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- –ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä **ESP8266** (–Ω–∞–ø—Ä–∏–º–µ—Ä, NodeMCU v2).
- **–î–∞—Ç—á–∏–∫ –≥–∞–∑–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, MQ-2, MQ-5), –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–π –∫ –∞–Ω–∞–ª–æ–≥–æ–≤–æ–º—É –ø–∏–Ω—É `A0`.
- –ê–¥—Ä–µ—Å–Ω–∞—è —Å–≤–µ—Ç–æ–¥–∏–æ–¥–Ω–∞—è –ª–µ–Ω—Ç–∞ **NeoPixel (WS2812B)** –Ω–∞ 8 —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–∞—è –∫ –ø–∏–Ω—É `D4` (GPIO2).
- **–ü—å–µ–∑–æ–∑—É–º–º–µ—Ä** (Buzzer), –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–π –∫ –ø–∏–Ω—É `D5` (GPIO14).
- **–¢–∞–∫—Ç–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞**, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–∞—è –∫ –ø–∏–Ω—É `D6` (GPIO12).

## üìö –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ PlatformIO —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

- `Adafruit NeoPixel`
- `FastBot`
- `ESP8266HTTPClient`

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–î–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∑–∞—â–∏—Ç—ã –≤–∞—à–∏—Ö –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã), –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª `src/secrets.h`. –≠—Ç–æ—Ç —Ñ–∞–π–ª —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`, –ø–æ—ç—Ç–æ–º—É –æ–Ω –Ω–µ –±—É–¥–µ—Ç —Å–ª—É—á–∞–π–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ GitHub.

**1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `secrets.h`**

–í –ø–∞–ø–∫–µ `src` –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å –∏–º–µ–Ω–µ–º `secrets.h`.

**2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —à–∞–±–ª–æ–Ω**

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª `src/secrets.h` —Å–ª–µ–¥—É—é—â–∏–π —à–∞–±–ª–æ–Ω –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è-–∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ (`YOUR_...`) –≤–∞—à–∏–º–∏ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

```cpp
#pragma once

// 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ WiFi
#define WIFI_SSID "YOUR_WIFI_SSID"
#define WIFI_PASS "YOUR_WIFI_PASSWORD"

// 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram-–±–æ—Ç–∞
//    - –¢–æ–∫–µ–Ω –ø–æ–ª—É—á–∏—Ç–µ —É @BotFather –≤ Telegram.
//    - ID —á–∞—Ç–∞ —É–∑–Ω–∞–π—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, —É –±–æ—Ç–∞ @userinfobot.
#define BOT_TOKEN "YOUR_TELEGRAM_BOT_TOKEN"
#define ADMIN_CHAT_ID "YOUR_CHAT_ID"

// 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
#define SERVER_ADDRESS "http://your.server.address/" // –ê–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞
#define SERVER_KEY "YOUR_SERVER_KEY"               // –ö–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É
#define STATION_ID "5"                             // ID –≤–∞—à–µ–π —Å—Ç–∞–Ω—Ü–∏–∏
#define SENSOR_ID "gas_sensor_1"                   // ID —Å–µ–Ω—Å–æ—Ä–∞

// 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∞—Ç—á–∏–∫–∞
//    –û—Ç–∫–∞–ª–∏–±—Ä—É–π—Ç–µ —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è –≤–∞—à–µ–≥–æ –¥–∞—Ç—á–∏–∫–∞, —á—Ç–æ–±—ã –≤ —á–∏—Å—Ç–æ–º –≤–æ–∑–¥—É—Ö–µ
//    –ø–æ–∫–∞–∑–∞–Ω–∏—è –±—ã–ª–∏ –±–ª–∏–∑–∫–∏ –∫ –Ω—É–ª—é.
#define GasLevelOffset 76 // –°–º–µ—â–µ–Ω–∏–µ –¥–ª—è –¥–∞—Ç—á–∏–∫–∞ –≥–∞–∑–∞
```

**3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª**

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—ã –≤–≤–µ–¥–µ—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ, —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª. –¢–µ–ø–µ—Ä—å –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Å–±–æ—Ä–∫–µ –∏ –ø—Ä–æ—à–∏–≤–∫–µ.

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1.  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Visual Studio Code —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º PlatformIO IDE.
2.  –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
3.  –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É —Å –ø—Ä–æ–µ–∫—Ç–æ–º –≤ VS Code.
4.  –°–æ–∑–¥–∞–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `src/secrets.h` (—Å–º. —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∞").
5.  –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ ESP8266 –∫ –∫–æ–º–ø—å—é—Ç–µ—Ä—É.
6.  –°–æ–±–µ—Ä–∏—Ç–µ –∏ –ø—Ä–æ—à–µ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç —Å –ø–æ–º–æ—â—å—é PlatformIO (–∫–Ω–æ–ø–∫–∞ `Upload` –≤ —Å—Ç—Ä–æ–∫–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è).

## ü§ñ –ö–æ–º–∞–Ω–¥—ã Telegram-–±–æ—Ç–∞

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤ —á–∞—Ç–µ, ID –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã —É–∫–∞–∑–∞–ª–∏ –≤ `idAdmin1`:

- `/start` ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏.
- `/ping` ‚Äî –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:
  - –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã (Uptime).
  - –£—Ä–æ–≤–µ–Ω—å —Å–∏–≥–Ω–∞–ª–∞ WiFi (RSSI).
  - –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –≥–∞–∑–∞ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö.
- `/restart` ‚Äî –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—à–∏–≤–∫–∏ (OTA)

1.  –í Arduino IDE –∏–ª–∏ PlatformIO —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª (`.bin`).
2.  –ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —ç—Ç–æ—Ç `.bin` —Ñ–∞–π–ª –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç —Ñ–∞–π–ª, —Å–∫–∞—á–∞–µ—Ç –µ–≥–æ –∏ –æ–±–Ω–æ–≤–∏—Ç —Å–≤–æ—é –ø—Ä–æ—à–∏–≤–∫—É, –ø–æ—Å–ª–µ —á–µ–≥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è.

---

_–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∏ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏._
